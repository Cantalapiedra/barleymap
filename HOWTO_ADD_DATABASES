HOWTO_ADD_DATABASES is part of Barleymap.
Copyright (C)  2013-2014  Carlos P Cantalapiedra.
(terms of use can be found within the distributed LICENSE file).

# Created 20131227 (updated 20180111)

This document describes how to create and configure new databases, to be used by Barleymap.

######### CREATING A DATABASE

A database in barleymap is a sequence database, which depends on the specific aligner which will be used to perform the searches.
It can be a blastn database, a gmap database, or a hsblastn database (no other aligners are supported so far). NOTE: for gmap, the recommended is version 2013-08-31
Therefore, each database has to be generated previously (refer to the specific aligner manual).

Once the database is generated, it should be copied to the folder indicated in the conf/paths.conf file.
For example, blastn databases should be copied to the path specified in the field "blastn_dbs_path".
The name of the files has to be a prefix which will be used as database identifier (unique_id, see next section).
For example, a blastn database which will be named database1 should have the next files:
database1.nhr
database1.nin
database1.nsq

Note that gmap databases should be copied within a folder with the same database identifier (unique_id, see next section). In the example above would be:
database1/

and within such folder all the gmap database1 files:
database1.chromosome
database1.chromosome.iit
... etc.

######### CONFIGURING THE DATABASE

Once the database has been created it can be used directly to perform alignments with the standalone application (script bmap_align_to_db).
However, to be used with as part of a map, both in the web and standalone applications, the database must be configured.

To do so, the file conf/databases.conf must be edited. Such file contains one row for each database. Each row has several blank space-delimited fields:

name: a name for the database.

unique_id: a unique identifier for the database. It must be different to all the other database unique_id fields.
This unique_id must coincide with the prefix used in names of the folders and files of the database (see previous section).
The unique_id will be used in other configuration files to refer to the specific database.

type: currently this field accepts 2 values, "std" and "big". The only difference is that for "big" databases, the gmapl program will be used instead of the default gmap program.

## As an example, the next is the configuration file currently used in the barleymap web application, with 6 databases:

# name unique_id type
MorexWGS morex_ass std
BowmanWGS bowman_ass std
BarkeWGS barke_ass std
SequencedBACs sBAC std
BACEndSequences BES_2010_04_12 std
MorexGenome 150831_barley_pseudomolecules big

#